pub def run(name: str, *args: str) -> str {
    let args_vec = args:iter():to_vec();

    let result = try $cmd(name, args_vec);
    if $is_err(result) {
        $panic("cmd::run(): ${name}: ${result}");
    }

    let (exit_code, std_out, std_err) = result;
    if exit_code != 0 {
        $panic("cmd::run(): ${name}: ${std_err:strip()}");
    }

    return std_out;
}


pub def mkdir(path: str) {
    run("mkdir", "-p", path);
}


pub def rm(path: str) {
    run("rm", "-rf", path);
}


pub def mv(src: str, dst: str) {
    run("mv", "-f", src, dst);
}


pub def cp(src: str, dst: str) {
    run("cp", "-rf", src, dst);
}


pub def git(*args: str) -> str {
    return run("git", *args);
}


pub def make(*args: str) -> str {
    return run("make", *args);
}
