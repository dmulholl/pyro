<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Pyro &mdash; Type Annotations</title>

        

        <link rel="stylesheet" href="../assets/fonts.css">
        <link rel="stylesheet" href="../assets/graphite.css">
        <link rel="stylesheet" href="../assets/pygments.css">

        
            <script src="../assets/code.js"></script>
        

        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”¥</text></svg>">

    </head>
    <body class="node-features-type-annotations node-features node">
        <header class="masthead">
            <h1><a href="../index.html">Pyro</a></h1>
            
                <p class="tagline">A dynamically-typed, garbage-collected scripting language.</p>
            
            
                <p class="version">Version 0.15.0</p>
            
            <nav class="menu">
                <input id="menu-check" type="checkbox"/>
                <label id="menu-label" for="menu-check" class="unselectable">
                    <span class="icon close-icon">âœ•</span>
                    <span class="icon open-icon">â˜°</span>
                    <span class="text">Menu</span>
                </label>
                <ul>
<li><a href="../index.html">Home</a></li>
<li><a href="../quickstart.html">Quickstart</a></li>
<li><a href="../tour.html">Language Tour</a></li>
<li><a href="../building.html">Building &amp; Installing</a></li>
<li><a href="../repl.html">The REPL</a></li>
<li><a href="../features.html">Language Features</a></li>
<li><a href="../builtins.html">Builtin Types</a></li>
<li><a href="../superglobals.html">Superglobals</a></li>
<li><a href="../stdlib.html">Standard Library</a></li>
<li><a href="../examples.html">Examples</a></li>
<li><a href="../tutorials.html">Tutorials</a></li>
<li><a href="../faq.html">FAQ</a></li>
<li><a href="../syntax-highlighting.html">Syntax Highlighting</a></li>
<li><a href="../acknowledgements.html">Acknowledgements</a></li>
<li><a href="../license.html">License</a></li>
<li><a href="https://github.com/dmulholl/pyro">Github</a></li>
</ul>
            </nav>
        </header>

        <article class="main">
            <header class="title">
                <h1>Type Annotations</h1>
                
                <hr>
            </header>
            <ul class="stx-toc">
<li>
<a href="#builtin-types">Builtin Types</a>
</li>
<li>
<a href="#syntax">Syntax</a>
</li>
<li>
<a href="#nullable-types">Nullable Types</a>
</li>
<li>
<a href="#callable-values">Callable Values</a>
</li>
<li>
<a href="#type-names">Type Names</a>
</li>
<li>
<a href="#type-aliases">Type Aliases</a>
</li>
<li>
<a href="#variadic-functions">Variadic Functions</a>
</li>
</ul>
<hr>
<p>
Pyro supports optional type annotations for variable, function, and method declarations, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span><span class="p">:</span> <span class="nx">i64</span> <span class="p">=</span> <span class="mi">123</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">bar</span><span class="p">:</span> <span class="nx">f64</span> <span class="p">=</span> <span class="mf">1.0</span><span class="p">;</span>

<span class="kd">def</span> <span class="nx">is_long</span><span class="p">(</span><span class="nx">text</span><span class="p">:</span> <span class="nx">str</span><span class="p">)</span> <span class="o">-</span><span class="p">&gt;</span> <span class="nx">bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">text</span><span class="p">:</span><span class="nx">byte_count</span><span class="p">()</span> <span class="p">&gt;</span> <span class="mi">100</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">def</span> <span class="nx">increment</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">i64</span><span class="p">,</span> <span class="nx">inc</span><span class="p">:</span> <span class="nx">i64</span> <span class="p">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span><span class="p">&gt;</span> <span class="nx">i64</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">inc</span><span class="p">;</span>
<span class="p">}</span>
</pre>
<p>
Pyro doesn't (currently) do anything with these type annotations, apart from verifying their syntax, but they're useful for documenting your code.
</p>
<p>
Future versions of Pyro may support optional type-checking or automatic documentation generation using type annotations.
</p>
<h3 id="builtin-types">
Builtin Types
</h3>
<p>
Annotations for builtin types are as follows:
</p>
<ul>
<li>
<code>any</code>
</li>
<li>
<code>bool</code>
</li>
<li>
<code>buf</code>
</li>
<li>
<code>class</code>
</li>
<li>
<code>err</code>
</li>
<li>
<code>f64</code>
</li>
<li>
<code>file</code>
</li>
<li>
<code>func</code>
</li>
<li>
<code>i64</code>
</li>
<li>
<code>instance</code>
</li>
<li>
<code>iter</code>
</li>
<li>
<code>iter[type]</code>
</li>
<li>
<code>map</code>
</li>
<li>
<code>map[key_type, value_type]</code>
</li>
<li>
<code>method</code>
</li>
<li>
<code>module</code>
</li>
<li>
<code>null</code>
</li>
<li>
<code>queue</code>
</li>
<li>
<code>queue[type]</code>
</li>
<li>
<code>rune</code>
</li>
<li>
<code>set</code>
</li>
<li>
<code>set[type]</code>
</li>
<li>
<code>stack</code>
</li>
<li>
<code>stack[type]</code>
</li>
<li>
<code>str</code>
</li>
<li>
<code>tup</code>
</li>
<li>
<code>tup[type1, type2, ...]</code>
</li>
<li>
<code>vec</code>
</li>
<li>
<code>vec[type]</code>
</li>
</ul>
<p>
The annotations below describe interfaces rather than concrete types:
</p>
<ul>
<li>
<code>callable</code>
</li>
<li>
<code>callable(type1, type2, ...) -&gt; type</code>
</li>
<li>
<code>iterable</code>
</li>
<li>
<code>iterable[type]</code>
</li>
<li>
<code>iterator</code>
</li>
<li>
<code>iterator[type]</code>
</li>
</ul>
<p>
A <code>callable</code> value is callable;
an <code>iterable</code> value has an <code>:$iter()</code> method that returns an iterator;
an <code>iterator</code> value has a <code>:$next()</code> method that returns the next item from a sequence.
</p>
<p>
Type annotations beginning with a lowercase letter are reserved for language builtins.
</p>
<h3 id="syntax">
Syntax
</h3>
<p>
Specify a variable's type by following its name with a colon and a type declaration:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">name</span><span class="p">:</span> <span class="nx">type</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">name</span><span class="p">:</span> <span class="nx">type</span> <span class="p">=</span> <span class="nx">value</span><span class="p">;</span>
</pre>
<p>
The same syntax works for function and method parameters:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">def</span> <span class="nx">func_name</span><span class="p">(</span><span class="nx">arg1</span><span class="p">:</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">:</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="cp">...</span>
<span class="p">}</span>
</pre>
<p>
Functions and methods can declare their return type by following their parameter list with an arrow, <code>-&gt;</code>, and a type declaration:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">def</span> <span class="nx">func_name</span><span class="p">()</span> <span class="o">-</span><span class="p">&gt;</span> <span class="nx">type</span> <span class="p">{</span>
    <span class="cp">...</span>
<span class="p">}</span>
</pre>
<p>
Container types can optionally specify their content types in square brackets, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span><span class="p">:</span> <span class="nx">vec</span><span class="p">[</span><span class="nx">str</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">bar</span><span class="p">:</span> <span class="nx">map</span><span class="p">[</span><span class="nx">str</span><span class="p">,</span> <span class="nx">i64</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">baz</span><span class="p">:</span> <span class="nx">tup</span><span class="p">[</span><span class="nx">i64</span><span class="p">,</span> <span class="nx">bool</span><span class="p">,</span> <span class="nx">str</span><span class="p">];</span>
</pre>
<p>
Where a type can be one of a discrete set of options, separate the options with a <code>|</code>, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span><span class="p">:</span> <span class="nx">i64</span><span class="o">|</span><span class="nx">f64</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">bar</span><span class="p">:</span> <span class="nx">map</span><span class="p">[</span><span class="nx">str</span><span class="p">,</span> <span class="nx">i64</span><span class="o">|</span><span class="nx">f64</span><span class="p">];</span>
</pre>
<p>
Type declarations can be nested as required, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span><span class="p">:</span> <span class="nx">vec</span><span class="p">[</span><span class="nx">map</span><span class="p">[</span><span class="nx">str</span><span class="p">,</span> <span class="nx">i64</span><span class="o">|</span><span class="nx">f64</span><span class="p">]];</span>
</pre>
<h3 id="nullable-types">
Nullable Types
</h3>
<p>
You can indicate that a type is nullable &mdash; i.e. can be either the specified type or <code>null</code> &mdash; by appending a <code>?</code> to the type name, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span><span class="p">:</span> <span class="nx">i64</span><span class="o">?</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">bar</span><span class="p">:</span> <span class="nx">vec</span><span class="p">[</span><span class="nx">str</span><span class="o">?</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">baz</span><span class="p">:</span> <span class="nx">map</span><span class="o">?</span><span class="p">[</span><span class="nx">str</span><span class="p">,</span> <span class="nx">i64</span><span class="p">];</span>
</pre>
<ul>
<li>
<code>foo</code> is either <code>null</code> or an <code>i64</code>.
</li>
<li>
<code>bar</code> is a <code>vec</code> whose entries are either <code>null</code> or <code>str</code>.
</li>
<li>
<code>baz</code> is either <code>null</code> or a <code>map</code> with <code>str</code> keys and <code>i64</code> values.
</li>
</ul>
<h3 id="callable-values">
Callable Values
</h3>
<p>
You can indicate that a value is callable &mdash; i.e. that the value is a function, method, class, or callable instance &mdash; using the <code>callable</code> type, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span><span class="p">:</span> <span class="nx">callable</span><span class="p">;</span>
</pre>
<p>
You can optionally specify the callable's return type, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span><span class="p">:</span> <span class="nx">callable</span> <span class="o">-</span><span class="p">&gt;</span> <span class="nx">bool</span><span class="p">;</span>
</pre>
<p>
You can optionally specify the callable's parameter types, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span><span class="p">:</span> <span class="nx">callable</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">bar</span><span class="p">:</span> <span class="nx">callable</span><span class="p">()</span> <span class="o">-</span><span class="p">&gt;</span> <span class="nx">bool</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">baz</span><span class="p">:</span> <span class="nx">callable</span><span class="p">(</span><span class="nx">i64</span><span class="p">,</span> <span class="nx">str</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">bam</span><span class="p">:</span> <span class="nx">callable</span><span class="p">(</span><span class="nx">i64</span><span class="p">,</span> <span class="nx">str</span><span class="p">)</span> <span class="o">-</span><span class="p">&gt;</span> <span class="nx">bool</span><span class="p">;</span>
</pre>
<ul>
<li>
<code>foo</code> is a callable that takes no parameters.
</li>
<li>
<code>bar</code> is a callable that takes no parameters and returns a <code>bool</code>.
</li>
<li>
<code>baz</code> is a callable that takes <code>i64</code> and <code>str</code> parameters.
</li>
<li>
<code>bam</code> is a callable that takes <code>i64</code> and <code>str</code> parameters and returns a <code>bool</code>.
</li>
</ul>
<p>
The <code>callable</code> type is nullable, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span><span class="p">:</span> <span class="nx">callable</span><span class="o">?</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">bar</span><span class="p">:</span> <span class="nx">callable</span><span class="o">?</span><span class="p">(</span><span class="nx">i64</span><span class="p">)</span> <span class="o">-</span><span class="p">&gt;</span> <span class="nx">bool</span><span class="p">;</span>
</pre>
<ul>
<li>
<code>foo</code> is either <code>null</code> or a callable.
</li>
<li>
<code>bar</code> is either <code>null</code> or a callable that takes takes an <code>i64</code> parameter and returns a <code>bool</code>.
</li>
</ul>
<h3 id="type-names">
Type Names
</h3>
<p>
A type name should specify either one of the builtin types or a user-defined type, possibly imported from a module, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span><span class="p">:</span> <span class="nx">UserType</span><span class="p">;</span>
</pre>
<p>
Here, <code>foo</code> is an instance of the class <code>UserType</code>. Type names can include a module path, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">bar</span><span class="p">:</span> <span class="nx">mod1</span><span class="p">::</span><span class="nx">mod2</span><span class="p">::</span><span class="nx">UserType</span><span class="p">;</span>
</pre>
<p>
Here, <code>bar</code> is an instance of the class <code>UserType</code> defined in the module <code>mod1::mod2</code>.
</p>
<h3 id="type-aliases">
Type Aliases
</h3>
<p>
You can define an alias for a type using a <code>typedef</code> statement, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">typedef</span> <span class="nx">Token</span> <span class="nx">tup</span><span class="p">[</span><span class="nx">str</span><span class="p">,</span> <span class="nx">i64</span><span class="p">,</span> <span class="nx">bool</span><span class="p">];</span>

<span class="kd">def</span> <span class="nx">makes_token</span><span class="p">()</span> <span class="o">-</span><span class="p">&gt;</span> <span class="nx">Token</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$tup</span><span class="p">(</span><span class="s">&quot;FOO&quot;</span><span class="p">,</span> <span class="mi">123</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">}</span>
</pre>
<h3 id="variadic-functions">
Variadic Functions
</h3>
<p>
A type annotation in a variadic function specifies the type of the individual parameter values, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">def</span> <span class="nx">add</span><span class="p">(</span><span class="o">*</span><span class="nx">args</span><span class="p">:</span> <span class="nx">i64</span><span class="o">|</span><span class="nx">f64</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">args</span><span class="p">:</span><span class="nx">iter</span><span class="p">():</span><span class="nx">sum</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">assert</span> <span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">==</span> <span class="mf">3.0</span><span class="p">;</span>
</pre>
<p>
Here, <code>add()</code> is a function that takes a variable number of arguments; each argument can be an <code>i64</code> or an <code>f64</code>.
</p>
        </article>

        
    </body>
</html>
