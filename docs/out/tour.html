<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>A Tour of Pyro</title>
        <link rel="stylesheet" href="assets/fonts.css">
        <link rel="stylesheet" href="assets/graphite.css">
        <link rel="stylesheet" href="assets/pygments.css">
        
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”¥</text></svg>">

    </head>
    <body class="node-tour node">
        <header class="masthead">
            <h1><a href="index.html">Pyro</a></h1>
            
                <p class="tagline">A scripting language for people who enjoy the simpler things in life.</p>
            
            
                <p class="version">Version 0.8.51</p>
            
            <nav class="menu">
                <input id="menu-check" type="checkbox"/>
                <label id="menu-label" for="menu-check" class="unselectable">
                    <span class="icon close-icon">âœ•</span>
                    <span class="icon open-icon">â˜°</span>
                    <span class="text">Menu</span>
                </label>
                <ul>
<li><a href="index.html">Home</a></li>
<li><a href="quickstart.html">Quickstart</a></li>
<li><a href="tour.html">Language Tour</a></li>
<li><a href="building.html">Building &amp; Installing</a></li>
<li><a href="repl.html">The REPL</a></li>
<li><a href="features.html">Language Features</a></li>
<li><a href="builtins.html">Builtin Types</a></li>
<li><a href="superglobals.html">Superglobals</a></li>
<li><a href="stdlib.html">Standard Library</a></li>
<li><a href="examples.html">Examples</a></li>
<li><a href="tutorials.html">Tutorials</a></li>
<li><a href="roadmap.html">Roadmap</a></li>
<li><a href="faq.html">FAQ</a></li>
<li><a href="acknowledgements.html">Acknowledgements</a></li>
<li><a href="license.html">License</a></li>
<li><a href="https://github.com/dmulholl/pyro">Github</a></li>
</ul>
            </nav>
        </header>
        <article class="main">
            <header class="title">
                <h1>A Tour of Pyro</h1>
                
                <hr>
            </header>
            <p>
Pyro begs, borrows, and steals from every language I've ever used, but it drags Python down a back alley and leaves it naked, bleeding, and penniless. If you've used Python you'll find many aspects of Pyro's design philosophy familiar.
</p>
<ul class="stx-toc">
<li>
<a href="#comments">Comments</a>
</li>
<li>
<a href="#variables">Variables</a>
</li>
<li>
<a href="#numbers">Numbers</a>
</li>
<li>
<a href="#strings">Strings</a>
</li>
<li>
<a href="#characters">Characters</a>
</li>
<li>
<a href="#booleans">Booleans</a>
</li>
<li>
<a href="#nulls">Nulls</a>
</li>
<li>
<a href="#equality">Equality</a>
</li>
<li>
<a href="#comparisons">Comparisons</a>
</li>
<li>
<a href="#printing">Printing</a>
</li>
<li>
<a href="#loops">Loops</a>
</li>
<li>
<a href="#conditions">Conditions</a>
</li>
<li>
<a href="#functions">Functions</a>
</li>
<li>
<a href="#classes">Classes</a>
</li>
<li>
<a href="#vectors">Vectors</a>
</li>
<li>
<a href="#maps">Maps</a>
</li>
<li>
<a href="#errors">Errors</a>
</li>
<li>
<a href="#panics">Panics</a>
</li>
<li>
<a href="#modules">Modules</a>
</li>
<li>
<a href="#the-main-function">The Main Function</a>
</li>
<li>
<a href="#unpacking">Unpacking</a>
</li>
<li>
<a href="#source-code">Source Code</a>
</li>
<li>
<a href="#testing">Testing</a>
</li>
</ul>
<h3 id="comments">
Comments
</h3>
<p>
Comments begin with a <code>#</code> symbol and run to the end of the line:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="c1"># Full line comment.</span>
<span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="mi">123</span><span class="p">;</span> <span class="c1"># Partial line comment.</span>
</pre>
<h3 id="variables">
Variables
</h3>
<p>
Variables are declared using the <code>var</code> keyword:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="mi">123</span><span class="p">;</span>
</pre>
<p>
Variables must be declared before use. If an initial value isn't specified the variable has the value <code>null</code>.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">foo</span> <span class="o">==</span> <span class="kc">null</span><span class="p">;</span>
</pre>
<p>
You can declare multiple variables in a single statement:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">baz</span> <span class="p">=</span> <span class="mi">123</span><span class="p">,</span> <span class="nx">bam</span> <span class="p">=</span> <span class="mi">456</span><span class="p">;</span>
</pre>
<p>
Variables have lexical scope and declarations inside blocks will shadow outer declarations:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="mi">123</span><span class="p">;</span>

<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="mi">456</span><span class="p">;</span>
    <span class="k">assert</span> <span class="nx">foo</span> <span class="o">==</span> <span class="mi">456</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">assert</span> <span class="nx">foo</span> <span class="o">==</span> <span class="mi">123</span><span class="p">;</span>
</pre>
<p>
Identifier names (this includes variables, functions, and classes) should begin with an ASCII letter or an underscore and contain only ASCII letters, numbers, and underscores.
</p>
<p>
Names beginning with a <code>$</code> symbol are special &mdash; this namespace is reserved by the language for builtin variables and functions.
</p>
<h3 id="numbers">
Numbers
</h3>
<p>
Pyro has two numeric types: <code>i64</code> for 64-bit signed two's-complement integers, and <code>f64</code> for 64-bit <a href="https://en.wikipedia.org/wiki/IEEE_754">IEEE 754 floats</a>.
Both behave as you'd expect and support the usual range of numeric operations.
</p>
<table>
<tbody>
<tr>
<td>
<code>+</code>
</td>
<td>
Addition. Returns an integer if both operands are integers or a float if either or both are floats.
</td>
</tr>
<tr>
<td>
<code>-</code>
</td>
<td>
Subtraction (binary) or negation (unary). Subtraction returns an integer if both operands are integers or a float if either or both are floats.
</td>
</tr>
<tr>
<td>
<code>*</code>
</td>
<td>
Multiplication. Returns an integer if both operands are integers or a float if either or both are floats.
</td>
</tr>
<tr>
<td>
<code>/</code>
</td>
<td>
Floating-point division. Both operands will be converted to floats and the result will be a float.
</td>
</tr>
<tr>
<td>
<code>//</code>
</td>
<td>
Truncating division. Returns an integer if both operands are integers or a float if either or both are floats.
</td>
</tr>
<tr>
<td>
<code>%</code>
</td>
<td>
Modulo/remainder operator. Returns an integer if both operands are integers or a float if either or both are floats.
</td>
</tr>
<tr>
<td>
<code>**</code>
</td>
<td>
Power operator. Both operands are converted to floats and the result is a float.
</td>
</tr>
</tbody>
</table>
<p>
Integer literals can use binary, octal, decimal, or hex notation:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">a</span> <span class="p">=</span> <span class="mb">0b101</span><span class="p">;</span>      <span class="c1"># a == 5</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="p">=</span> <span class="mo">0o101</span><span class="p">;</span>      <span class="c1"># b == 65</span>
<span class="kd">var</span> <span class="nx">c</span> <span class="p">=</span> <span class="mi">101</span><span class="p">;</span>        <span class="c1"># c == 101</span>
<span class="kd">var</span> <span class="nx">d</span> <span class="p">=</span> <span class="mh">0x101</span><span class="p">;</span>      <span class="c1"># d == 257</span>
</pre>
<p>
Integer literals can use underscores to improve readability:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="mi">123_456</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">bar</span> <span class="p">=</span> <span class="mb">0b1010_0101</span><span class="p">;</span>
</pre>
<p>
Float literals require a decimal point and can also use underscores to improve readability:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="mf">1.0</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">pi</span> <span class="p">=</span> <span class="mf">3.141_592_654</span><span class="p">;</span>
</pre>
<h3 id="strings">
Strings
</h3>
<p>
A string, <code>str</code>, is an immutable array of bytes.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">string</span> <span class="p">=</span> <span class="s">&quot;hello pyro&quot;</span><span class="p">;</span>
</pre>
<p>
Pyro strings have methods that let you manipulate them as ASCII or as UTF-8 but the string type itself is agnostic about its encoding &mdash; a string can contain any sequence of byte values including null bytes or invalid UTF-8.
</p>
<p>
You can find a full description of the string type <a href="builtins/strings.html">here</a>.
</p>
<h3 id="characters">
Characters
</h3>
<p>
A character, <code>char</code>, is an unsigned 32-bit integer representing a Unicode code point.
</p>
<p>
Character literals use single quotes:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">c1</span> <span class="p">=</span> <span class="sc">&#39;a&#39;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">c2</span> <span class="p">=</span> <span class="sc">&#39;â‚¬&#39;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">c3</span> <span class="p">=</span> <span class="sc">&#39;ðŸ”¥&#39;</span><span class="p">;</span>
</pre>
<p>
You can find a full description of the character type <a href="builtins/characters.html">here</a>.
</p>
<h3 id="booleans">
Booleans
</h3>
<p>
A boolean value is either <code>true</code> or <code>false</code>.
You can convert any value to a boolean using the <code>$bool(arg)</code> function.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">assert</span> <span class="nx">$bool</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span> <span class="o">==</span> <span class="kc">true</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">$bool</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span> <span class="o">==</span> <span class="kc">false</span><span class="p">;</span>
</pre>
<p>
Values which convert to <code>true</code> are <b>truthy</b>, values which convert to <code>false</code> are <b>falsey</b>.
</p>
<ul>
<li>
The values <code>false</code> and <code>null</code> are falsey, as is any <code>err</code> value.
</li>
<li>
All other values are truthy.
</li>
</ul>
<h3 id="nulls">
Nulls
</h3>
<p>
Uninitialized variables have the default value <code>null</code>.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">value</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span><span class="p">;</span>
</pre>
<p>
You can use the null-coalescing operator <code>??</code> to supply a default value in place of a <code>null</code>:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">result</span> <span class="p">=</span> <span class="nx">maybe_null</span><span class="p">()</span> <span class="o">??</span> <span class="s">&quot;default&quot;</span><span class="p">;</span>
</pre>
<p>
Functions which don't explicitly specify a return value have the return value <code>null</code>.
</p>
<h3 id="equality">
Equality
</h3>
<p>
The equality operator is <code>==</code>. Its inverse is <code>!=</code>.
</p>
<p>
Numbers compare as equal using <code>==</code> if their values are numerically equal, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">;</span>
<span class="k">assert</span> <span class="sc">&#39;a&#39;</span> <span class="o">==</span> <span class="mi">97</span><span class="p">;</span>
<span class="k">assert</span> <span class="sc">&#39;b&#39;</span> <span class="o">==</span> <span class="mf">98.0</span><span class="p">;</span>
</pre>
<p>
Strings compare as equal if they have the same content, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="s">&quot;foobar&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">bar</span> <span class="p">=</span> <span class="s">&quot;foobar&quot;</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">foo</span> <span class="o">==</span> <span class="nx">bar</span><span class="p">;</span>
</pre>
<p>
Tuples compare as equal if they have the same length and their elements are equal, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="nx">$tup</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="mi">123</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">bar</span> <span class="p">=</span> <span class="nx">$tup</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="mi">123</span><span class="p">);</span>
<span class="k">assert</span> <span class="nx">foo</span> <span class="o">==</span> <span class="nx">bar</span><span class="p">;</span>
</pre>
<p>
Sets compare as equal if they are set-equivalent, i.e. if they contain the same items in any order:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>
<span class="kd">var</span> <span class="nx">bar</span> <span class="p">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>
<span class="k">assert</span> <span class="nx">foo</span> <span class="o">==</span> <span class="nx">bar</span><span class="p">;</span>
</pre>
<p>
By default, other objects are equal only if they are the same object:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">class</span> <span class="nx">Object</span> <span class="p">{}</span>

<span class="kd">var</span> <span class="nx">obj1</span> <span class="p">=</span> <span class="nx">Object</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">obj2</span> <span class="p">=</span> <span class="nx">Object</span><span class="p">();</span>

<span class="k">assert</span> <span class="nx">obj1</span> <span class="o">==</span> <span class="nx">obj1</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">obj1</span> <span class="o">!=</span> <span class="nx">obj2</span><span class="p">;</span>
</pre>
<p>
You can overload the equality operator to customize its behaviour for your own types.
</p>
<h3 id="comparisons">
Comparisons
</h3>
<p>
You can use the comparison operators (<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>) with any combination of numerical types, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">assert</span> <span class="mf">2.0</span> <span class="p">&gt;</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">assert</span> <span class="sc">&#39;a&#39;</span> <span class="p">&gt;</span> <span class="mi">42</span><span class="p">;</span>
</pre>
<p>
The comparison operators also work with strings, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">assert</span> <span class="s">&quot;abc&quot;</span> <span class="p">&lt;</span> <span class="s">&quot;def&quot;</span><span class="p">;</span>
</pre>
<p>
Strings are compared lexicographically by byte value, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">assert</span> <span class="s">&quot;a&quot;</span> <span class="p">&lt;</span> <span class="s">&quot;aa&quot;</span><span class="p">;</span>
<span class="k">assert</span> <span class="s">&quot;aa&quot;</span> <span class="p">&lt;</span> <span class="s">&quot;aaa&quot;</span><span class="p">;</span>
</pre>
<p>
You can use the comparison operators directly on tuples, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">assert</span> <span class="nx">$tup</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="p">&lt;</span> <span class="nx">$tup</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</pre>
<p>
Tuples are compared lexicographically by element.
</p>
<p>
You can overload the comparison operators to customize their behaviour for your own types
</p>
<h3 id="printing">
Printing
</h3>
<p>
The <code>echo</code> statement prints to the standard output stream. It's useful for simple printing and debugging, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">echo</span> <span class="s">&quot;hello pyro&quot;</span><span class="p">;</span>
</pre>
<p>
You can <code>echo</code> any value &mdash; <code>echo</code> stringifies its argument before printing it.
(It's equivalent to calling <code>$str()</code> on the argument first and printing the result.)
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">echo</span> <span class="mi">123</span><span class="p">;</span>
</pre>
<p>
You can supply multiple arguments to <code>echo</code>, separated by commas, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">echo</span> <span class="nx">foo</span><span class="p">,</span> <span class="mi">123</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">;</span>
</pre>
<p>
<code>echo</code> prints the stringified values separated by spaces.
</p>
<p>
Pyro also has a family of <code>$print()</code>/<code>$println()</code> functions with support for <a href="features/formatting.html">format strings</a>, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="nx">$print</span><span class="p">(</span><span class="s">&quot;hello pyro&quot;</span><span class="p">);</span>               <span class="c1"># &quot;hello pyro&quot;</span>
<span class="nx">$print</span><span class="p">(</span><span class="s">&quot;{} and {}&quot;</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">);</span>  <span class="c1"># &quot;foo and bar&quot;</span>
<span class="nx">$print</span><span class="p">(</span><span class="s">&quot;{} and {}&quot;</span><span class="p">,</span> <span class="mi">123</span><span class="p">,</span> <span class="mi">456</span><span class="p">);</span>      <span class="c1"># &quot;123 and 456&quot;</span>
</pre>
<ul>
<li>
<p>
Calling the <code>$print()</code> function with a single argument is equivalent to calling <code>$str()</code> on that argument first and printing the resulting string.
</p>
</li>
<li>
<p>
Calling the <code>$print()</code> function with more than one argument is equivalent to calling <code>$fmt()</code> on those arguments first and printing the resulting string.
</p>
</li>
</ul>
<p>
The only difference between <code>$print()</code> and <code>$println()</code> is that <code>$println()</code> adds a newline character to the output.
</p>
<p>
Pyro also has <code>$eprint()</code> and <code>$eprintln()</code> functions which print to the standard error stream.
</p>
<p>
See the <a href="features/formatting.html">string formatting</a> documentation for a detailed look at the <code>$fmt()</code> function and format strings.
</p>
<h3 id="loops">
Loops
</h3>
<p>
Pyro has support for several different looping constructs.
The simplest is the infinite loop:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">i</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">loop</span> <span class="p">{</span>
    <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="nx">i</span> <span class="o">==</span> <span class="mi">5</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">assert</span> <span class="nx">i</span> <span class="o">==</span> <span class="mi">5</span><span class="p">;</span>
</pre>
<p>
The <code>loop</code> statement also supports C-style loops with an initializer, a condition, and an incrementing expression:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">loop</span> <span class="kd">var</span> <span class="nx">i</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nx">i</span><span class="p">;</span>
<span class="p">}</span>
</pre>
<p>
The <code>for</code> keyword in Pyro is used for looping over iterators:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">vec</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="s">&quot;baz&quot;</span><span class="p">];</span>

<span class="k">for</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">vec</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nx">item</span><span class="p">;</span>
<span class="p">}</span>
</pre>
<p>
Finally, Pyro supports <code>while</code> loops:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">i</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">while</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span> <span class="p">{</span>
    <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">assert</span> <span class="nx">i</span> <span class="o">==</span> <span class="mi">10</span><span class="p">;</span>
</pre>
<p>
All the looping constructs support <code>break</code> and <code>continue</code>.
</p>
<h3 id="conditions">
Conditions
</h3>
<p>
Conditional statements in Pyro look like this:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">if</span> <span class="nx">money</span> <span class="p">&gt;</span> <span class="mi">100</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s">&quot;we have lots of money&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre>
<p>
A conditional statement evaluates the <i>truthiness</i> of an expression. The syntax is:
</p>
<pre>
if &lt;expression&gt; {
    ...
}
</pre>
<p>
As you'd expect, conditional statements support optional <code>else if</code> and <code>else</code> clauses:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">if</span> <span class="nx">money</span> <span class="p">&gt;</span> <span class="mi">100</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s">&quot;we have lots of money&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">money</span> <span class="p">&gt;</span> <span class="mi">10</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s">&quot;we have some money&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s">&quot;we&#39;re poor&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre>
<p>
Note that <code>if</code> statements support <a href="features/conditional-scoped-variables.html">conditional-scoped variables</a>.
</p>
<p>
Pyro also has support for conditional expressions using the ternary operator <code>? :|</code>:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">status</span> <span class="p">=</span> <span class="nx">money</span> <span class="p">&gt;</span> <span class="mi">100</span> <span class="o">?</span> <span class="s">&quot;rich&quot;</span> <span class="p">:</span><span class="o">|</span> <span class="s">&quot;poor&quot;</span><span class="p">;</span>
</pre>
<h3 id="functions">
Functions
</h3>
<p>
Function definitions look like this:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">def</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</pre>
<p>
If you don't explicitly return a value from a function, its return value is <code>null</code>.
</p>
<p>
Pyro has full support for closures.
An inner function declared inside an outer function can capture the outer function's local variables, including its parameters, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">def</span> <span class="nx">make_adder</span><span class="p">(</span><span class="nx">increment</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">def</span> <span class="nx">adder</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">num</span> <span class="o">+</span> <span class="nx">increment</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">adder</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">adds_one</span> <span class="p">=</span> <span class="nx">make_adder</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="k">assert</span> <span class="nx">adds_one</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">adds_one</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">adds_two</span> <span class="p">=</span> <span class="nx">make_adder</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="k">assert</span> <span class="nx">adds_two</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">adds_two</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">;</span>
</pre>
<p>
Functions are first-class citizens in Pyro, meaning you can pass them around just like any other value.
You can also declare and use functions anonymously, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">add</span> <span class="p">=</span> <span class="kd">def</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">assert</span> <span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">;</span>
</pre>
<p>
You can find full documentation for Pyro's functions <a href="features/functions.html">here</a>.
</p>
<h3 id="classes">
Classes
</h3>
<p>
Class definitions look like this:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">class</span> <span class="nx">Person</span> <span class="p">{</span>
    <span class="kd">pub</span> <span class="kd">var</span> <span class="nx">name</span><span class="p">;</span>
    <span class="kd">pub</span> <span class="kd">var</span> <span class="nx">role</span> <span class="p">=</span> <span class="s">&quot;programmer&quot;</span><span class="p">;</span>

    <span class="kd">def</span> <span class="nx">$init</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">pub</span> <span class="kd">def</span> <span class="nx">info</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$println</span><span class="p">(</span><span class="s">&quot;{} is a {}.&quot;</span><span class="p">,</span> <span class="kc">self</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="kc">self</span><span class="p">.</span><span class="nx">role</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>
<p>
Create an instance of a class by calling its name:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="cp">&gt;&gt;&gt;</span> <span class="kd">var</span> <span class="nx">dave</span> <span class="p">=</span> <span class="nx">Person</span><span class="p">(</span><span class="s">&quot;Dave&quot;</span><span class="p">);</span>
</pre>
<p>
Arguments are passed on to the optional initializer method, <code>$init()</code>.
</p>
<p>
Call a method on an instance using the method access operator, <code>:</code>:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="cp">&gt;&gt;&gt;</span> <span class="nx">dave</span><span class="p">:</span><span class="nx">info</span><span class="p">();</span>
<span class="nx">Dave</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">programmer</span><span class="p">.</span>
</pre>
<p>
Get or set an instance's fields using the field access operator, <code>.</code>:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="cp">&gt;&gt;&gt;</span> <span class="nx">dave</span><span class="p">.</span><span class="nx">role</span> <span class="p">=</span> <span class="s">&quot;pointy headed manager&quot;</span><span class="p">;</span>
<span class="cp">&gt;&gt;&gt;</span> <span class="nx">dave</span><span class="p">:</span><span class="nx">info</span><span class="p">();</span>
<span class="nx">Dave</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">pointy</span> <span class="nx">headed</span> <span class="nx">manager</span><span class="p">.</span>
</pre>
<p>
Boo Dave.
</p>
<p>
Classes are a big enough topic to deserve a page of their own which you can find <a href="features/classes.html">here</a>.
</p>
<h3 id="vectors">
Vectors
</h3>
<p>
Pyro has a builtin vector type, <code>vec</code> &mdash; a dynamic array similar to a <code>list</code> in Python. You can create a <code>vec</code> using a vector-literal, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">vec</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">];</span>
</pre>
<p>
Vectors use zero-based indices, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">assert</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;foo&quot;</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;bar&quot;</span><span class="p">;</span>
</pre>
<p>
You can index into a vector to get or set entries, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="s">&quot;baz&quot;</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;baz&quot;</span><span class="p">;</span>
</pre>
<p>
You can add items to a vector using the <code>:append()</code> method, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="nx">vec</span><span class="p">:</span><span class="nx">append</span><span class="p">(</span><span class="s">&quot;bam&quot;</span><span class="p">);</span>
<span class="k">assert</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;bam&quot;</span><span class="p">;</span>
</pre>
<p>
You can find a full description of Pyro's <code>vec</code> type <a href="builtins/vectors.html">here</a>.
</p>
<h3 id="maps">
Maps
</h3>
<p>
Pyro has a builtin map type, <code>map</code> &mdash; an ordered hash-map similar to a <code>dict</code> in Python. You can create a <code>map</code> using a map-literal, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">map</span> <span class="p">=</span> <span class="p">{</span>
    <span class="s">&quot;foo&quot;</span> <span class="p">=</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s">&quot;bar&quot;</span> <span class="p">=</span> <span class="mi">456</span><span class="p">,</span>
<span class="p">};</span>
</pre>
<p>
You can index into a <code>map</code> to get or set entries, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="k">assert</span> <span class="nx">map</span><span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">123</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">map</span><span class="p">[</span><span class="s">&quot;bar&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">456</span><span class="p">;</span>

<span class="nx">map</span><span class="p">[</span><span class="s">&quot;baz&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="mi">789</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">map</span><span class="p">[</span><span class="s">&quot;baz&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">789</span><span class="p">;</span>
</pre>
<p>
You can find a full description of Pyro's map type <a href="builtins/maps.html">here</a>.
</p>
<h3 id="errors">
Errors
</h3>
<p>
Pyro has a dedicated error type, <code>err</code>, which a function can return to indicate failure.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">$err</span><span class="p">(</span><span class="s">&quot;oops!&quot;</span><span class="p">);</span>
</pre>
<p>
You can check if a value is an <code>err</code> using the <code>$is_err(arg)</code> function.
Alternatively, you can provide a default value for a function call that might fail using the error-coalescing operator <code>!!</code>:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">result</span> <span class="p">=</span> <span class="nx">might_fail</span><span class="p">()</span> <span class="o">!!</span> <span class="s">&quot;default&quot;</span><span class="p">;</span>
</pre>
<p>
You can find a full description of the <code>err</code> type <a href="builtins/errors.html">here</a>.
</p>
<h3 id="panics">
Panics
</h3>
<p>
A panic in Pyro is similar to an exception in other languages &mdash; it indicates that the program has attempted to do something impossible like divide by zero or read from a file that doesn't exist.
</p>
<p>
An unhandled panic will result in the program exiting with an error message and a non-zero status code.
</p>
<p>
You can trap a panic using a <code>try</code> expression:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">result</span> <span class="p">=</span> <span class="k">try</span> <span class="nx">might_panic</span><span class="p">();</span>
</pre>
<p>
A <code>try</code> expression returns the value of its operand if it evaluates without panicking or an <code>err</code> if it panics.
</p>
<p>
<code>try</code> is a unary operator with the same precedence as <code>!</code> or <code>-</code> so you should wrap lower-precedence expressions in brackets:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="k">try</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>  <span class="c1"># 0.5</span>
<span class="kd">var</span> <span class="nx">bar</span> <span class="p">=</span> <span class="k">try</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">0</span><span class="p">);</span>  <span class="c1"># err</span>
</pre>
<p>
You can use the error-coalescing operator <code>!!</code> to provide a default value for a panicking expression:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="k">try</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!!</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1"># 0.5</span>
<span class="kd">var</span> <span class="nx">bar</span> <span class="p">=</span> <span class="k">try</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">0</span><span class="p">)</span> <span class="o">!!</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1"># 0</span>
</pre>
<p>
You can raise a panic from your own code by calling the <code>$panic()</code> function with an error message:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="nx">$panic</span><span class="p">(</span><span class="s">&quot;oh no!&quot;</span><span class="p">);</span>
</pre>
<p>
If the panic is unhandled, the error message will be printed to the standard error stream and the program will exit with a non-zero status code.
</p>
<h3 id="modules">
Modules
</h3>
<p>
A module is a Pyro file loaded as a library. Modules are loaded using the <code>import</code> keyword.
</p>
<p>
Assume we have a file called <code>math.pyro</code> containing math functions:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kn">import</span> <span class="nx">math</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="nx">math</span><span class="p">::</span><span class="nx">abs</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</pre>
<p>
Modules can contain submodules. Assume we have a directory called <code>math</code> containing a file called <code>trig.pyro</code>:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kn">import</span> <span class="nx">math</span><span class="p">::</span><span class="nx">trig</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">foo</span> <span class="p">=</span> <span class="nx">trig</span><span class="p">::</span><span class="nx">cos</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</pre>
<p>
Modules are a big enough topic to deserve a page of their own which you can find <a href="features/modules.html">here</a>.
</p>
<h3 id="the-main-function">
The Main Function
</h3>
<p>
When you run a script file Pyro first executes the script then looks for a function called <code>$main()</code>.
If it finds a <code>$main()</code> function it runs it automatically.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">def</span> <span class="nx">$main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s">&quot;hello from $main()&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre>
<p>
Note that the <code>$main()</code> function won't be run if you import the same file as a module.
</p>
<h3 id="unpacking">
Unpacking
</h3>
<p>
You can unpack the values of a tuple or vector in a <code>var</code> declaration using the following syntax:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">,</span> <span class="nx">baz</span><span class="p">)</span> <span class="p">=</span> <span class="nx">$tup</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">456</span><span class="p">,</span> <span class="mi">789</span><span class="p">);</span>

<span class="k">assert</span> <span class="nx">foo</span> <span class="o">==</span> <span class="mi">123</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">bar</span> <span class="o">==</span> <span class="mi">456</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">baz</span> <span class="o">==</span> <span class="mi">789</span><span class="p">;</span>
</pre>
<p>
Similarly, you can unpack the loop variable of a <code>for</code> loop:
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="nx">map</span> <span class="p">=</span> <span class="p">{</span>
    <span class="s">&quot;foo&quot;</span> <span class="p">=</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s">&quot;bar&quot;</span> <span class="p">=</span> <span class="mi">456</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="k">in</span> <span class="nx">map</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nx">key</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>
</pre>
<p>
You can discard unwanted values by assigning them to the unnamed variable <code>_</code>, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">var</span> <span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">baz</span><span class="p">)</span> <span class="p">=</span> <span class="nx">$tup</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">456</span><span class="p">,</span> <span class="mi">789</span><span class="p">);</span>

<span class="k">assert</span> <span class="nx">foo</span> <span class="o">==</span> <span class="mi">123</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">baz</span> <span class="o">==</span> <span class="mi">789</span><span class="p">;</span>
</pre>
<h3 id="source-code">
Source Code
</h3>
<p>
Source code outside of string literals is assumed to be UTF-8 encoded.
String literals can contain arbitrary byte sequences including null bytes and invalid UTF-8.
</p>
<h3 id="testing">
Testing
</h3>
<p>
Pyro has builtin support for unit tests.
</p>
<p>
Use the <code>assert</code> statement to test your code, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">def</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">assert</span> <span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">;</span>
<span class="k">assert</span> <span class="nx">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">;</span>
</pre>
<p>
An <code>assert</code> statement will panic if its operand expression evaluates as <i>falsey</i>. The syntax is:
</p>
<pre>
assert &lt;expression&gt;;
</pre>
<p>
You can use the <code>test</code> command to run test functions, e.g.
</p>
<pre class="lang-pyro pygments" data-lang="pyro">
<span class="kd">def</span> <span class="nx">$test_addition</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">assert</span> <span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">assert</span> <span class="nx">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">;</span>
<span class="p">}</span>
</pre>
<p>
You can find documentation for the <code>test</code> command <a href="features/testing.html">here</a>.
</p>
        </article>
        
    </body>
</html>
