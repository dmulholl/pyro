import std::path;
import std::path::{exists, is_file, is_dir, is_symlink};
import std::path::{basename, dirname, join};

assert exists($filepath);
assert is_file($filepath);
assert is_dir(dirname($filepath));
assert is_file(join(dirname($filepath), basename($filepath)));

assert exists(path::cwd());
assert is_dir(path::cwd());

assert dirname("/foo/bar/baz.txt") == "/foo/bar";
assert dirname("foo/bar/baz.txt") == "foo/bar";
assert dirname("baz.txt") == ".";
assert dirname("/") == "/";
assert dirname("") == ".";

assert basename("/foo/bar/baz.txt") == "baz.txt";
assert basename("foo/bar/baz.txt") == "baz.txt";
assert basename("baz.txt") == "baz.txt";
assert basename("/") == "/";
assert basename("") == ".";

assert $is_err(try join());

assert join("foo") == "foo";

assert join("foo", "bar") == "foo/bar";
assert join("foo", "bar", "baz") == "foo/bar/baz";
assert join("foo/", "bar") == "foo/bar";
assert join("foo", "/bar") == "foo/bar";
assert join("foo/", "/bar") == "foo//bar";
assert join("/foo/", "/bar") == "/foo//bar";
assert join("/foo/", "/bar/") == "/foo//bar/";

assert join("") == "";

assert join("", "") == "";
assert join("foo", "") == "foo";
assert join("", "bar") == "bar";

assert join("foo", "", "baz") == "foo/baz";
assert join("", "bar", "") == "bar";
assert join("foo", "", "") == "foo";
assert join("", "bar", "") == "bar";
assert join("", "", "baz") == "baz";
assert join("", "", "") == "";
