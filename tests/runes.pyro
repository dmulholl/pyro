# 1-byte utf8 literals.
assert $is_rune('A');
assert $str('A') == "A";
assert $i64('A') == 0x41;
assert $rune(0x41) == 'A';

# 2-byte utf8 literals.
assert $is_rune('Â§');
assert $str('Â§') == "Â§";
assert $i64('Â§') == 0xA7;
assert $rune(0xA7) == 'Â§';

# 3-byte utf8 literals.
assert $is_rune('â‚¬');
assert $str('â‚¬') == "â‚¬";
assert $i64('â‚¬') == 0x20AC;
assert $rune(0x20AC) == 'â‚¬';

# 4-byte utf8 literals.
assert $is_rune('ğ€€');
assert $str('ğ€€') == "ğ€€";
assert $i64('ğ€€') == 0x10000;
assert $rune(0x10000) == 'ğ€€';
assert $is_rune('ğŸ‘');
assert $str('ğŸ‘') == "ğŸ‘";
assert $i64('ğŸ‘') == 0x1F44D;
assert $rune(0x1F44D) == 'ğŸ‘';

var foo = "aÂ§bâ‚¬cğŸ‘d";
assert foo:rune(0) == 'a';
assert foo:rune(1) == 'Â§';
assert foo:rune(2) == 'b';
assert foo:rune(3) == 'â‚¬';
assert foo:rune(4) == 'c';
assert foo:rune(5) == 'ğŸ‘';
assert foo:rune(6) == 'd';

assert "":rune_count() == 0;
assert "a":rune_count() == 1;
assert "abc":rune_count() == 3;
assert "aÂ§bâ‚¬cğŸ‘d":rune_count() == 7;


def $test_adding_runes() {
    assert 'a' + 'b' == "ab";
    assert 'â‚¬' + 'ğŸ”¥' == "â‚¬ğŸ”¥";
}


def $test_appending_rune_to_string() {
    assert "foo" + 'x' == "foox";
    assert "foo" + 'ğŸ”¥' == "fooğŸ”¥";
}


def $test_prepending_rune_to_string() {
    assert 'x' + "foo" == "xfoo";
    assert 'ğŸ”¥' + "foo" == "ğŸ”¥foo";
}


def $test_multiplication_by_int() {
    assert 'x' * 0 == "";
    assert 'x' * 3 == "xxx";
    assert 'ğŸ”¥' * 3 == "ğŸ”¥ğŸ”¥ğŸ”¥";
    assert $is_err(try ('x' * -3));
}


def $test_methods() {
    assert 'x':is_ascii();
    assert !'ğŸ”¥':is_ascii();

    assert ' ':is_ascii_ws();
    assert !'x':is_ascii_ws();

    assert ' ':is_unicode_ws();
    assert !'x':is_unicode_ws();

    assert '1':is_ascii_decimal();
    assert !'x':is_ascii_decimal();

    assert '1':is_ascii_octal();
    assert !'9':is_ascii_octal();

    assert '1':is_ascii_hex();
    assert !'x':is_ascii_hex();

    assert 'a':is_ascii_alpha();
    assert !'1':is_ascii_alpha();

    assert '.':is_ascii_printable();
    assert !'\x00':is_ascii_printable();
}
