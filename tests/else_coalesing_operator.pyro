# false, default
assert (null else "default") == "default";
assert (false else "default") == "default";
assert (0 else "default") == "default";
assert ('\0' else "default") == "default";
assert (0.0 else "default") == "default";
assert ("" else "default") == "default";
assert ($err() else "default") == "default";

# true, default
assert (true else "default") == true;
assert (123 else "default") == 123;
assert ('A' else "default") == 'A';
assert (1.0 else "default") == 1.0;
assert ("foobar" else "default") == "foobar";

# false, true, default
assert (null else "notnull" else "default") == "notnull";
assert (false else true else "default") == true;
assert (0 else 123 else "default") == 123;
assert ('\0' else 'A' else "default") == 'A';
assert (0.0 else 1.0 else "default") == 1.0;
assert ("" else "foobar" else "default") == "foobar";
assert ($err() else "xyz" else "default") == "xyz";

# false, false, default
assert (null else null else "default") == "default";
assert (false else false else "default") == "default";
assert (0 else 0 else "default") == "default";
assert ('\0' else '\0' else "default") == "default";
assert (0.0 else 0.0 else "default") == "default";
assert ("" else "" else "default") == "default";
assert ($err() else $err() else "default") == "default";

# true, false, default
assert ("notnull" else null else "default") == "notnull";
assert (true else false else "default") == true;
assert (123 else 0 else "default") == 123;
assert ('A' else '\0' else "default") == 'A';
assert (1.0 else 0.0 else "default") == 1.0;
assert ("foobar" else "" else "default") == "foobar";
assert ("xyz" else $err() else "default") == "xyz";

# true, true, default
assert (true else true else "default") == true;
assert (123 else 456 else "default") == 123;
assert ('A' else 'B' else "default") == 'A';
assert (1.0 else 2.0 else "default") == 1.0;
assert ("foo" else "bar" else "default") == "foo";

class Object {
}
var obj = Object();

assert (null else obj) == obj;
assert (obj else null) == obj;

assert (null else obj else "xyz") == obj;
assert (null else "xyz" else obj) == "xyz";
assert (obj else null else "xyz") == obj;
assert (obj else "xyz" else null) == obj;
assert ("xyz" else obj else null) == "xyz";
assert ("xyz" else null else obj) == "xyz";
