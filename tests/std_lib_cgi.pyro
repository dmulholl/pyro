import $std::cgi;

assert cgi::url_encode(" ") == "%20";
assert cgi::url_encode("!") == "%21";
assert cgi::url_encode("#") == "%23";
assert cgi::url_encode("$") == "%24";
assert cgi::url_encode("%") == "%25";
assert cgi::url_encode("&") == "%26";
assert cgi::url_encode("'") == "%27";
assert cgi::url_encode("(") == "%28";
assert cgi::url_encode(")") == "%29";
assert cgi::url_encode("*") == "%2A";
assert cgi::url_encode("+") == "%2B";
assert cgi::url_encode(",") == "%2C";
assert cgi::url_encode("/") == "%2F";
assert cgi::url_encode(":") == "%3A";
assert cgi::url_encode(";") == "%3B";
assert cgi::url_encode("=") == "%3D";
assert cgi::url_encode("?") == "%3F";
assert cgi::url_encode("@") == "%40";
assert cgi::url_encode("[") == "%5B";
assert cgi::url_encode("]") == "%5D";
assert cgi::url_encode(" !$! ") == "%20%21%24%21%20";

assert cgi::url_encode("A") == "A";
assert cgi::url_encode("b") == "b";
assert cgi::url_encode(" !foo! ") == "%20%21foo%21%20";

assert cgi::url_decode("+") == " ";
assert cgi::url_decode("%20") == " ";
assert cgi::url_decode("%21") == "!";
assert cgi::url_decode("%25") == "%";
assert cgi::url_decode("%21%25%21") == "!%!";

assert cgi::url_decode("foo") == "foo";
assert cgi::url_decode("%21foo%21") == "!foo!";

var input = "foo !#$%&'()*+,/:;=?@[] bar";
var encoded = cgi::url_encode(input);
var decoded = cgi::url_decode(encoded);
assert input == decoded;
